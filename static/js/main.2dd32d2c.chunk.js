(this["webpackJsonpstudent-app"]=this["webpackJsonpstudent-app"]||[]).push([[0],{151:function(e,t){},153:function(e,t){},167:function(e,t){},169:function(e,t){},197:function(e,t){},199:function(e,t){},200:function(e,t){},206:function(e,t){},208:function(e,t){},226:function(e,t){},228:function(e,t){},240:function(e,t){},243:function(e,t){},264:function(e,t,n){},265:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"name",(function(){return Y})),n.d(r,"id",(function(){return G})),n.d(r,"ListPreview",(function(){return Z})),n.d(r,"Instructions",(function(){return C})),n.d(r,"Instance",(function(){return D})),n.d(r,"instanceList",(function(){return $}));var a={};n.r(a),n.d(a,"name",(function(){return Q})),n.d(a,"id",(function(){return V})),n.d(a,"ListPreview",(function(){return _})),n.d(a,"Instance",(function(){return K})),n.d(a,"instanceList",(function(){return ee}));var c={};n.r(c),n.d(c,"name",(function(){return ve})),n.d(c,"id",(function(){return ge})),n.d(c,"ListPreview",(function(){return me})),n.d(c,"instanceList",(function(){return pe})),n.d(c,"Instance",(function(){return xe})),n.d(c,"Instructions",(function(){return he}));var i={};n.r(i),n.d(i,"name",(function(){return Be})),n.d(i,"id",(function(){return Je})),n.d(i,"ListPreview",(function(){return Fe})),n.d(i,"Instance",(function(){return Ie})),n.d(i,"instanceList",(function(){return Ue})),n.d(i,"Instructions",(function(){return Le}));var s={};n.r(s),n.d(s,"name",(function(){return tt})),n.d(s,"id",(function(){return nt})),n.d(s,"ListPreview",(function(){return rt})),n.d(s,"Instance",(function(){return Ve})),n.d(s,"instanceList",(function(){return at})),n.d(s,"Instructions",(function(){return et}));var o=n(5),l=n(9),u=n.n(l),h=n(13),d=n(2),j=n(0),f=n(1),b=n.n(f),v=n(138),g=n.n(v),m=n(48),p=n(8),x=n(141),O=n(139),w=n.n(O),y=b.a.createContext({user:null,setUser:function(){}});function k(e){var t=Object(f.useState)(),n=Object(d.a)(t,2),r=n[0],a=n[1],c=Object(f.useState)(),i=Object(d.a)(c,2),s=i[0],o=i[1],l=Object(f.useState)(!1),b=Object(d.a)(l,2),v=b[0],g=b[1],m=Object(f.useState)(!1),p=Object(d.a)(m,2),x=p[0],O=p[1],k=Object(f.useContext)(y).setUser,q=function(e,t){e((function(e){var n=t.target.value.replace(/[^a-zA-Z\-']/,"");return n.length<20?n:e}))},N=Object(f.useCallback)(function(){var t=Object(h.a)(u.a.mark((function t(n){var a,c,i,o,l,h,d;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r&&s){t.next=3;break}return O("missing name"),t.abrupt("return");case 3:return g(n?"create":"login"),a={first:r,last:s},c="".concat("https://secret-plains-66902.herokuapp.com/api","/students")+(n?"":"/login"),t.prev=6,t.next=9,fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 9:if(i=t.sent,g(!1),!i.ok){t.next=29;break}return O(!1),t.prev=13,t.next=16,i.json();case 16:o=t.sent.token,l=w.a.decode(o),h=l.student,d={token:o,student:h},sessionStorage.setItem("mcub-student-user",JSON.stringify(d)),k(d),e.history.push("/"),t.next=27;break;case 24:t.prev=24,t.t0=t.catch(13),console.log(t.t0);case 27:t.next=31;break;case 29:O(i.status),console.log("HTTP error, status = "+i.status);case 31:t.next=38;break;case 33:t.prev=33,t.t1=t.catch(6),g(!1),O(500),console.log(t.t1);case 38:case"end":return t.stop()}}),t,null,[[6,33],[13,24]])})));return function(e){return t.apply(this,arguments)}}(),[r,s,e.history,k]),M=Object(f.useCallback)((function(e){"Enter"===e.key&&N(!1)}),[N]);return Object(f.useEffect)((function(){return window.addEventListener("keydown",M),function(){return window.removeEventListener("keydown",M)}}),[M]),Object(j.jsx)("div",{className:"login-container",children:Object(j.jsxs)("div",{className:"login-window",children:[v?Object(j.jsx)("div",{className:"fetching-indicator",children:"create"===v?"Creating new user...":"Logging in..."}):null,x?Object(j.jsx)("p",{className:"login-error",children:404===x?"User not found. Please try again or create a new user.":403===x?"User already exists.":"missing name"===x?"Please enter both your first and last name.":"An error occurred, please try again."}):null,Object(j.jsxs)("div",{className:"name-container first",children:[Object(j.jsx)("label",{htmlFor:"firstname",children:"First Name:"}),Object(j.jsx)("input",{type:"text",name:"firstname",id:"firstname",value:r,onChange:q.bind(null,a)})]}),Object(j.jsxs)("div",{className:"name-container last",children:[Object(j.jsx)("label",{htmlFor:"lastname",children:"Last Name:"}),Object(j.jsx)("input",{type:"text",name:"lastname",id:"lastname",value:s,onChange:q.bind(null,o)})]}),Object(j.jsx)("button",{className:"create-student",onClick:function(){return N(!0)},children:"Create"}),Object(j.jsx)("button",{className:"login-student",onClick:function(){return N(!1)},children:"Log-In"})]})})}var q=n(7),N={"-":"-","+":"+","*":"x","/":"\xf7"},M={size:4,work:Array(16).fill(null).map((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[1],a=Math.floor(r/4),c=r%4,i=(c+a)%4+1;return{row:a,col:c,value:i}})),cages:[]},z={size:4,work:[{col:0,row:0,value:1},{col:1,row:0,value:2},{col:2,row:0,value:3},{col:3,row:0,value:4},{col:0,row:2,value:2},{col:0,row:3,value:4},{col:1,row:3,value:1},{col:3,row:3,value:3},{col:2,row:1,value:2},{col:2,row:2,value:4}],cages:[{squares:[{col:0,row:0},{col:1,row:0}],operation:"+",result:"3"},{squares:[{col:2,row:0},{col:3,row:0}],operation:"-",result:"1"},{squares:[{col:3,row:3}],operation:"",result:"3"},{squares:[{col:0,row:2},{col:0,row:3},{col:1,row:3}],operation:"*",result:"8"},{squares:[{col:2,row:1},{col:2,row:2}],operation:"/",result:"2"}]},S={size:4,work:Array(16).fill(null).map((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[1],a=[3,2,4,1,2,1,3,4,4,3,1,2,1,4,2,3],c=Math.floor(r/4),i=r%4,s=a[r];return{row:c,col:i,value:s}})),cages:[{squares:[{col:0,row:0},{col:0,row:1}],operation:"+",result:"5"},{squares:[{col:0,row:2},{col:0,row:3},{col:1,row:3}],operation:"+",result:"9"},{squares:[{col:1,row:0},{col:1,row:1},{col:2,row:0}],operation:"-",result:"1"},{squares:[{col:1,row:2},{col:2,row:2}],operation:"+",result:"4"},{squares:[{col:2,row:1},{col:3,row:0},{col:3,row:1}],operation:"-",result:"0"},{squares:[{col:2,row:3},{col:3,row:2},{col:3,row:3}],operation:"+",result:"7"}]};function C(e){var t=e.history;return Object(j.jsxs)("div",{className:"calcudoku-instructions",children:[Object(j.jsxs)("h2",{children:["Calcudoku Instructions",Object(j.jsx)("hr",{})]}),Object(j.jsx)("p",{children:"The goal of each puzzle is to fill the grid using only certain digits \u2013\u2013 1 through 4 for a 4\xd74 grid, 1 through 5 for a 5\xd75, etc. \u2013\u2013 so that no digit appears more than once in any row or any column."}),Object(j.jsx)(I,{data:M}),Object(j.jsx)("p",{children:"Additionally, the grid is divided into heavily outlined groups of squares called \u201ccages\u201d. Each cage has a target number and an operation in its upper left corner. The numbers when the numbers in the cage are combined using the cage\u2019s operation they must equal the target number."}),Object(j.jsx)(I,{data:z}),Object(j.jsx)("p",{children:'Digits may be repeated within a cage, as long as they are not in the same row or column. No operation is relevant for a single-cell cage: placing the "target" in the cell is the only possibility.'}),Object(j.jsx)(I,{data:S}),Object(j.jsxs)("p",{children:["Be careful that you know for sure that a number"," ",Object(j.jsx)("strong",{children:"has"})," to go in a square before you put it there. Making a mistake early can cause trouble later on. Use lots of process of elimination!"]}),Object(j.jsx)("button",{className:"try-it",onClick:function(){return t.push("/calcudoku")},children:"Try It!"})]})}function I(e){var t=e.data,n=t.size,r=Object(f.useState)(function(e){var t=e.size,n=e.cages,r=e.work;return Array(Math.pow(t,2)).fill(null).map((function(){for(var e=arguments.length,a=new Array(e),c=0;c<e;c++)a[c]=arguments[c];var i=a[1],s=Math.floor(i/t),o=i%t,l=T({col:s,row:o}),u=r.find(l),h=u?u.value:null,d=n.find((function(e){return e.squares.find(l)})),j=P({col:s,row:o},d);if(!d)return{col:s,row:o,value:h,neighbors:j};var f=d.squares.every((function(e){return e.col>=s&&(e.row>=o||e.col>s)})),b=f?d.result:null,v=f?N[d.operation]:null;return{col:s,row:o,value:h,neighbors:j,result:b,operation:v}}))}(t)),a=Object(d.a)(r,2),c=a[0],i=(a[1],Object(f.useState)(null)),s=Object(d.a)(i,2),o=s[0],l=s[1];return Object(j.jsx)("div",{children:c?Object(j.jsx)("div",{className:"puzzle-container instructions",size:n,children:Object(j.jsx)("div",{className:"grid-container",size:n,children:c.map((function(e){var t="calcudoku-square "+e.neighbors.join(" ")+(e===o?" active":"");return Object(j.jsxs)("div",{className:t,onClick:function(){return l(e)},children:[Object(j.jsxs)("div",{className:"cage-indicator",children:[e.result,e.operation]}),Object(j.jsx)("input",{type:"number",value:e.value||"",disabled:!0})]})}))})}):null})}function P(e,t){var n=[],r={"n-up":{col:e.col-1,row:e.row},"n-down":{col:e.col+1,row:e.row},"n-left":{col:e.col,row:e.row-1},"n-right":{col:e.col,row:e.row+1}};if(!t)return Object.keys(r);for(var a in r){var c=T(r[a]);t.squares.find(c)&&n.push(a)}return n}function T(e){var t=e.col,n=e.row;return function(e){return e.col===t&&e.row===n}}var L=n(29);function A(e,t){var n=Object(f.useContext)(y).user.token;Object(f.useEffect)((function(){var r="".concat("https://secret-plains-66902.herokuapp.com/api","/activepuzzle");return Object(h.a)(u.a.mark((function a(){return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,fetch(r,{method:"PUT",headers:{"Content-Type":"application/json",authorization:n},body:JSON.stringify({puzzleName:e,puzzleId:t})});case 2:case"end":return a.stop()}}),a)})))(),function(){fetch(r,{method:"DELETE",headers:{authorization:n}})}}),[n,t,e])}function E(e,t,n){var r=Object(f.useContext)(y).user.token,a="".concat(e,"-instance-data-").concat(t),c="".concat("https://secret-plains-66902.herokuapp.com/api","/puzzles/")+"".concat(e,"/").concat(t);Object(f.useEffect)((function(){var e=JSON.parse(sessionStorage.getItem(a));e.completed||n()&&(fetch("".concat(c,"/completed"),{method:"PUT",headers:{"Content-Type":"application/json",authorization:r},body:JSON.stringify({completed:!0})}),e.completed=!0,sessionStorage.setItem(a,JSON.stringify(e)))}),[a,n,c,r])}function B(e,t,n){var r=Object(f.useContext)(y).user.token,a="".concat(e,"-instance-data-").concat(t),c="".concat("https://secret-plains-66902.herokuapp.com/api","/puzzles/")+"".concat(e,"/").concat(t);return function(){var e=Object(h.a)(u.a.mark((function e(t){var i,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n("saving"),e.next=3,fetch(c,{method:"PUT",headers:{"Content-Type":"application/json",authorization:r},body:JSON.stringify({puzzleData:t})});case 3:i=e.sent,(s=JSON.parse(sessionStorage.getItem(a))).work=t,s.workPosition=t.length,sessionStorage.setItem(a,JSON.stringify(s)),i.ok?n("saved"):n("error");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}function J(e){return F.apply(this,arguments)}function F(){return(F=Object(h.a)(u.a.mark((function e(t){var n,r,a,c,i,s,o,l,h,d;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.token,r="".concat("https://secret-plains-66902.herokuapp.com/api","/data"),e.next=4,fetch(r,{method:"GET",headers:{authorization:n}});case 4:if(!(a=e.sent).ok){e.next=12;break}return e.next=8,a.json();case 8:for(i in c=e.sent){s=Object(L.a)(c[i]);try{for(s.s();!(o=s.n()).done;)l=o.value,h=l.puzzleId,d="".concat(i,"-instance-data-").concat(h),sessionStorage.setItem(d,JSON.stringify(l))}catch(u){s.e(u)}finally{s.f()}}e.next=13;break;case 12:console.log("HTTP error, status = ".concat(a.status));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var U={"-":"-","+":"+","*":"x","/":"\xf7"};function D(e){var t=e.name,n="calcudoku-instance-data-".concat(t),r=JSON.parse(sessionStorage.getItem(n)),a=r.size,c=r.cages,i=Object(f.useState)(function(e){var t=e.size,n=e.cages,r=e.work;return Array(Math.pow(t,2)).fill(null).map((function(){for(var e=arguments.length,a=new Array(e),c=0;c<e;c++)a[c]=arguments[c];var i=a[1],s=Math.floor(i/t),o=i%t,l=W({col:s,row:o}),u=r.find(l),h=n.find((function(e){return e.squares.find(l)})),d=R({col:s,row:o},h),j=h.squares.every((function(e){return e.col>=s&&(e.row>=o||e.col>s)})),f=j?h.result:null,b=j?U[h.operation]:null,v=u?u.value:null;return{col:s,row:o,value:v,neighbors:d,result:f,operation:b}}))}(r)),s=Object(d.a)(i,2),o=s[0],l=s[1],u=Object(f.useState)(null),h=Object(d.a)(u,2),b=h[0],v=h[1],g=Object(f.useState)("saved"),m=Object(d.a)(g,2),p=m[0],x=m[1],O=B("calcudoku",t,x),w=Object(f.useCallback)((function(){var e=c.reduce((function(e,t){return H(o,t)||e}),!1),t=o.reduce((function(e,t){return X(o,t)||e}),!1);return!e&&!t}),[o,c]),y=function(){var e=o.map((function(e){return{col:e.col,row:e.row,value:e.value}}));O(e)},k=function(e){var t=e.key;if(b){if(!isNaN(t)&&1<=t&&t<=a)b.value=t;else{var n=b.col,r=b.row;switch(t){case"Backspace":case"Delete":b.value="";break;case"ArrowUp":return void v(o.find(W({col:n-1,row:r}))||b);case"ArrowDown":return void v(o.find(W({col:n+1,row:r}))||b);case"ArrowLeft":return void v(o.find(W({col:n,row:r-1}))||b);case"ArrowRight":return void v(o.find(W({col:n,row:r+1}))||b);default:return}}l(Object(q.a)(o)),y()}else["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(t)&&v(o.find(W({col:0,row:0})))},N=function(e){return Object(j.jsx)("button",{className:"number-select",onClick:function(){b.value=e,l(Object(q.a)(o)),y()},children:e},"num".concat(e))};return A("calcudoku",t),E("calcudoku",t,w),Object(f.useEffect)((function(){return window.addEventListener("keydown",k),function(){return window.removeEventListener("keydown",k)}})),Object(j.jsx)("div",{children:o?Object(j.jsxs)("div",{className:"puzzle-container",size:a,children:[Object(j.jsx)("div",{className:"saving-indicator",children:"saving"===p?"Saving...":"error"===p?"An error occurred while saving.":"saved"===p?"Saved.":" "}),Object(j.jsx)("div",{className:"grid-container",size:a,children:o.map((function(e){var n=W(e),r=e.result&&c?c.find((function(e){return e.squares.find(n)})):null,a="calcudoku-square "+e.neighbors.join(" ")+(e===b?" active":"")+(t.match("4x4beginner1")&&X(o,e)?" duplicate":"")+((t.match("4x4beginner1")||t.match("4x4beginner2"))&&r&&H(o,r)?" cageError":"");return Object(j.jsxs)("div",{className:a,onClick:function(){return v(e)},children:[Object(j.jsxs)("div",{className:"cage-indicator",children:[e.result,e.operation]}),Object(j.jsx)("input",{type:"number",value:e.value||"",disabled:!0}),Object(j.jsx)("div",{className:"selector"})]})}))}),Object(j.jsx)("div",{className:"number-select-container",children:new Array(a).fill(null).map((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[1];return N(r+1)}))})]}):Object(j.jsx)("h2",{className:"loading-indicator",children:"Loading..."})})}function R(e,t){var n=[],r={"n-up":{col:e.col-1,row:e.row},"n-down":{col:e.col+1,row:e.row},"n-left":{col:e.col,row:e.row-1},"n-right":{col:e.col,row:e.row+1}};for(var a in r){var c=W(r[a]);t.squares.find(c)&&n.push(a)}return n}function W(e){var t=e.col,n=e.row;return function(e){return e.col===t&&e.row===n}}function X(e,t){var n=t.col,r=t.row,a=t.value;return e.some((function(e){return(e.row===r||e.col===n)&&!(e.row===r&&e.col===n)&&e.value===a}))}function H(e,t){var n,r,a=t.squares,c=t.operation,i=t.result,s=a.map((function(t){return+e.find(W(t)).value}));if(s.some((function(e){return!e})))return!1;switch(c){case"+":r=0,n=function(e){return function(e,t){return e+t}};break;case"-":r=0,n=function(e){return function(t,n,r){return r===e?t+n:t-n}};break;case"*":r=1,n=function(e){return function(e,t){return e*t}};break;case"/":r=1,n=function(e){return function(t,n,r){return r===e?t*n:t/n}};break;default:r=0,n=function(e){return function(e,t){return t}}}return!s.map((function(e,t,a){return a.reduce(n(t),r)})).includes(+i)}var Y="Calcudokus",G="calcudoku";function Z(){return Object(j.jsx)("div",{className:"list-preview",children:"Find all calcudokus here"})}var $=[{instance:"instructions",title:"Instructions"},{instance:"4x4beginner1",title:"4x4 Beginner 1"},{instance:"4x4beginner2",title:"4x4 Beginner 2"},{instance:"4x4beginner3",title:"4x4 Beginner 3"},{instance:"4x4beginner4",title:"4x4 Beginner 4"},{instance:"4x4beginner5",title:"4x4 Beginner 5"},{instance:"4x4intermediate1",title:"4x4 Intermediate 1"},{instance:"4x4intermediate2",title:"4x4 Intermediate 2"},{instance:"4x4intermediate3",title:"4x4 Intermediate 3"},{instance:"4x4intermediate4",title:"4x4 Intermediate 4"},{instance:"4x4expert1",title:"4x4 Expert 1"},{instance:"4x4expert2",title:"4x4 Expert 2"},{instance:"4x4expert3",title:"4x4 Expert 3"},{instance:"5x5beginner1",title:"5x5 Beginner 1"},{instance:"5x5beginner2",title:"5x5 Beginner 2"},{instance:"5x5intermediate1",title:"5x5 Intermediate 1"}];function K(e){var t=e.name,n="logic-instance-data-".concat(t),r=JSON.parse(sessionStorage.getItem(n)),a=r.description,c=Object(f.useState)(r.work),i=Object(d.a)(c,2),s=i[0],o=i[1],l=Object(f.useState)("saved"),u=Object(d.a)(l,2),h=u[0],b=u[1],v=Object(f.useState)(30),g=Object(d.a)(v,2),m=g[0],p=g[1],x=Object(f.useRef)(!0),O=B("logic",t,b),w=Object(f.useCallback)((function(){return O(s)}),[s]);return A("logic",t),Object(f.useEffect)((function(){if(x.current)return x.current=!1;b(null);var t=e.history.listen(w),n=setTimeout(w,3e3);return function(){clearTimeout(n),t()}}),[w,e.history,b,x]),Object(f.useEffect)((function(){var e=function(){"saved"!==h&&w()};return window.addEventListener("beforeunload",e),function(){window.removeEventListener("beforeunload",e)}}),[w,h]),Object(f.useEffect)((function(){0===m&&(p(30),h||w())}),[m,w,h]),Object(f.useEffect)((function(){var e=setInterval((function(){return p((function(e){return e-1}))}),1e3);return function(){return clearInterval(e)}}),[p]),a?Object(j.jsxs)("div",{className:"logic instance",children:[Object(j.jsx)("p",{className:"puzzle-description",children:a}),Object(j.jsx)("textarea",{className:"work",onChange:function(e){o(e.target.value)},value:s,placeholder:"Enter your solution or any notes here!"}),Object(j.jsx)("div",{className:"saving-indicator",children:"saving"===h?"Saving...":"error"===h?"An error occurred while saving.":"saved"===h?"Saved.":" "})]}):Object(j.jsx)("h2",{className:"loading-indicator",children:"Loading..."})}$.fetchCompletionStatus=J;var Q="Logic Puzzles",V="logic";function _(){return Object(j.jsx)("div",{className:"list-preview",children:"Find all logic puzzles here"})}var ee=[{instance:"wolfgoatcabbage",title:"Wolf, Goat, Cabbage"},{instance:"torch",title:"Bridge & Torch"},{instance:"goldboxes",title:"Find the Gold"},{instance:"10coins",title:"10 Coins"},{instance:"socks",title:"Cathy's Socks"},{instance:"childrenboat",title:"2 Adults, 2 Children, a Boat, and a River"},{instance:"applesandoranges",title:"Apples & Oranges"},{instance:"averybobbycam",title:"Avery, Bobby, & Cam"},{instance:"bear",title:"Bear"},{instance:"hats",title:"Hats"}];function te(e){var t=e.name,n="light-instance-data-".concat(t),r=JSON.parse(sessionStorage.getItem(n)),a=Object(f.useState)(r.work),c=Object(d.a)(a,2),i=c[0],s=c[1],o=Object(f.useState)(r.workPosition||i.length),l=Object(d.a)(o,2),u=l[0],h=l[1],b=r.size,v=b.cols,g=b.rows,m=r.beginstate,p=r.neighborType,x=Object(f.useState)("saved"),O=Object(d.a)(x,2),w=O[0],y=B("light",t,O[1]),k=Object(f.useCallback)((function(e){var t=function(e){var t=e.row,n=e.col;switch(p){case"x":return[{row:t-1,col:n-1},{row:t+1,col:n+1},{row:t+1,col:n-1},{row:t-1,col:n+1},{row:t,col:n}];default:return[{row:t-1,col:n},{row:t+1,col:n},{row:t,col:n-1},{row:t,col:n+1},{row:t,col:n}]}}(e);return(i.slice(0,u).filter((function(e){return t.some(ne(e))})).length+(m.some(ne(e))?1:0))%2>0}),[i,u,m]),N=Object(f.useCallback)((function(){for(var e=0;e<g;e++)for(var t=0;t<v;t++)if(!k({row:e,col:t}))return!1;return!0}),[v,g,k]),M=function(e){var t=[].concat(Object(q.a)(i.slice(0,u)),[e]);h(u+1),s(t),y(t)},z=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=n[1],c="light-square ".concat(k({row:e,col:a})?"active":"inactive");return Object(j.jsx)("div",{className:c,onClick:function(){return M({row:e,col:a})}})},S=function(e){h(e);var t=JSON.parse(sessionStorage.getItem(n));t.workPosition=e,sessionStorage.setItem(n,JSON.stringify(t))};return E("light",t,N),A("light",t),Object(j.jsxs)("div",{className:"light-puzzle-container",children:[Object(j.jsxs)("div",{className:"moves-indicator",children:["Moves: ",Object(j.jsx)("span",{className:"moves",children:u})]}),Object(j.jsx)("div",{className:"light-grid",cols:v,rows:g,children:new Array(g).fill(null).map((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[1];return Object(j.jsx)("div",{className:"grid-row",children:Array(v).fill(null).map(z.bind(null,r))})}))}),Object(j.jsxs)("div",{className:"controller",children:[Object(j.jsx)(ae,{jump:function(){return S(0)},isactive:u>0}),Object(j.jsx)(re,{step:function(){return S(Math.max(u-1,0))},isactive:u>0}),Object(j.jsx)(ce,{step:function(){return S(Math.min(u+1,i.length))},isactive:u<i.length}),Object(j.jsx)(ie,{jump:function(){return S(i.length)},isactive:u<i.length})]}),Object(j.jsx)("div",{className:"saving-indicator",children:"saving"===w?"Saving...":"error"===w?"An error occurred while saving.":"saved"===w?"Saved.":" "})]})}function ne(e){var t=e.row,n=e.col;return function(e){return e.col===n&&e.row===t}}function re(e){var t=e.step,n=e.isactive;return Object(j.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"2048",height:"2048",viewBox:"0 0 2048 2048",onClick:t,className:"step back nav-button",isactive:n.toString(),children:Object(j.jsx)("path",{d:"M1344 576v896q0 26-19 45t-45 19-45-19l-448-448q-19-19-19-45t19-45l448-448q19-19 45-19t45 19 19 45z"})})}function ae(e){var t=e.jump,n=e.isactive;return Object(j.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"2048",height:"2048",viewBox:"0 0 2048 2048",onClick:t,className:"jump back nav-button",isactive:n.toString(),children:Object(j.jsx)("path",{d:"M1811 269q19-19 32-13t13 32v1472q0  26-13 32t-32-13l-710-710q-8-9-13-19v710q0  26-13 32t-32-13l-710-710q-19-19-19-45t19-45l710-710q19-19  32-13t13 32v710q5-11 13-19z"})})}function ce(e){var t=e.step,n=e.isactive;return Object(j.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"2048",height:"2048",viewBox:"0 0 2048 2048",onClick:t,className:"step forward nav-button",isactive:n.toString(),children:Object(j.jsx)("path",{d:"M1280 1024q0 26-19 45l-448 448q-19 19-45  19t-45-19-19-45v-896q0-26 19-45t45-19 45  19l448 448q19 19 19 45z"})})}function ie(e){var t=e.jump,n=e.isactive;return Object(j.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"2048",height:"2048",viewBox:"0 0 2048 2048",onClick:t,className:"jump forward nav-button",isactive:n.toString(),children:Object(j.jsx)("path",{d:"M237 1779q-19 19-32 13t-13-32v-1472q0-26 13-32t32 13l710  710q8 8 13 19v-710q0-26 13-32t32 13l710 710q19 19 19 45t-19  45l-710 710q-19 19-32 13t-13-32v-710q-5 10-13 19z"})})}ee.fetchCompletionStatus=J;var se={size:{cols:1,rows:1},beginstate:[],work:[]},oe={size:{cols:3,rows:1},beginstate:[],work:[]},le={size:{cols:3,rows:3},beginstate:[],work:[]},ue={size:{cols:3,rows:3},beginstate:[],work:[],neighborType:"x"};function he(e){var t=e.history;return Object(j.jsxs)("div",{className:"light-instructions",children:[Object(j.jsxs)("h2",{children:["Light Puzzle Instructions",Object(j.jsx)("hr",{})]}),Object(j.jsxs)("div",{className:"steps",children:[Object(j.jsxs)("div",{className:"step",children:[Object(j.jsx)("p",{children:"Here, the goal is to light up all the squares. Clicking a square toggles it on and off (clicking a dark square will light it up and clicking a lit square will make it dark again)."}),Object(j.jsx)(je,{data:se})]}),Object(j.jsxs)("div",{className:"step",children:[Object(j.jsx)("p",{children:"However, when you click on a square the same thing will happen to squares that are next to it."}),Object(j.jsx)(je,{data:oe})]}),Object(j.jsxs)("div",{className:"step",children:[Object(j.jsx)("p",{children:"You can use the navigation buttons at the bottom of the puzzle to go back and forward through the moves you've made."}),Object(j.jsx)(je,{data:oe,showNav:!0})]}),Object(j.jsx)("div",{className:"step",children:Object(j.jsx)("p",{className:"emphasized",children:"It can be tempting to click randomly, but take it slow! Try to light up all the squares using as few moves as you can!"})})]}),Object(j.jsx)("button",{className:"try-it",onClick:function(){return t.push("/light")},children:"Try It!"})]})}function de(e){var t=e.history;return Object(j.jsxs)("div",{className:"light-instructions",children:[Object(j.jsxs)("h2",{children:["Light Puzzle-X Instructions",Object(j.jsx)("hr",{})]}),Object(j.jsxs)("div",{className:"steps",children:[Object(j.jsx)("div",{className:"step",children:Object(j.jsx)("p",{children:'Puzzles marked with an "X" work a little differently. Clicking a square will light up squares the diagonal to it instead of ones directly next to it.'})}),Object(j.jsxs)("div",{className:"examples",children:[Object(j.jsxs)("div",{className:"example",children:["Normal Puzzle",Object(j.jsx)(je,{data:le})]}),Object(j.jsxs)("div",{className:"example",children:["Puzzle-X",Object(j.jsx)(je,{data:ue})]})]})]}),Object(j.jsx)("button",{className:"try-it",onClick:function(){return t.push("/light/smallx")},children:"Try It!"})]})}function je(e){var t=e.data,n=e.showNav,r=Object(f.useState)(t.work),a=Object(d.a)(r,2),c=a[0],i=a[1],s=Object(f.useState)(0),o=Object(d.a)(s,2),l=o[0],u=o[1],h=t.size,b=h.cols,v=h.rows,g=t.beginstate,m=t.neighborType,p=function(e){var t=e.row,n=e.col;switch(m){case"x":return[{row:t-1,col:n-1},{row:t+1,col:n+1},{row:t+1,col:n-1},{row:t-1,col:n+1},{row:t,col:n}];default:return[{row:t-1,col:n},{row:t+1,col:n},{row:t,col:n-1},{row:t,col:n+1},{row:t,col:n}]}},x=function(e){u(e)},O=function(e){i([].concat(Object(q.a)(c.slice(0,l)),[e])),u(l+1)},w=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=n[1],i=p({row:e,col:a}),s=c.slice(0,l).filter((function(e){return i.some(fe(e))})),o=(s.length+(g.some(fe({row:e,col:a}))?1:0))%2>0,u="light-square ".concat(o?"active":"inactive");return Object(j.jsx)("div",{className:u,onClick:function(){return O({row:e,col:a})}})};return Object(j.jsxs)("div",{className:"light-puzzle-container",children:[Object(j.jsx)("div",{className:"light-grid",cols:b,rows:v,children:new Array(v).fill(null).map((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[1];return Object(j.jsx)("div",{className:"grid-row",children:Array(b).fill(null).map(w.bind(null,r))})}))}),n?Object(j.jsxs)("div",{className:"controller",children:[Object(j.jsx)(ae,{jump:function(){return x(0)},isactive:l>0}),Object(j.jsx)(re,{step:function(){return x(Math.max(l-1,0))},isactive:l>0}),Object(j.jsx)(ce,{step:function(){return x(Math.min(l+1,c.length))},isactive:l<c.length}),Object(j.jsx)(ie,{jump:function(){return x(c.length)},isactive:l<c.length})]}):null]})}function fe(e){var t=e.row,n=e.col;return function(e){return e.col===n&&e.row===t}}var be=Array.from({length:5},(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[1];return r+1}));var ve="Light Puzzles",ge="light";function me(){return Object(j.jsx)("div",{className:"list-preview",children:"Find all light puzzles here"})}var pe=[{instance:"instructions",title:"Instructions"},{instance:"small",title:"Small"},{instance:"medium",title:"Medium"},{instance:"large",title:"Large"},{instance:"instructionsx",title:"Instructions-X"},{instance:"smallx",title:"Small-X"},{instance:"mediumx",title:"Medium-X"},{instance:"largex",title:"Large-X"}];pe.fetchCompletionStatus=function(){var e=Object(h.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:J(t),pe.forEach((function(e){var t=e.instance;if(!t.match("instructions")){for(var n=!0,r=1;r<=5;r++){var a="light-instance-data-".concat(t).concat(r),c=JSON.parse(sessionStorage.getItem(a));c&&c.completed||(n=!1)}sessionStorage.setItem("light-instance-data-".concat(t),JSON.stringify({completed:n}))}}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var xe=function(e){var t=e.history,n=e.name,r=e.match,a=Object(f.useState)(1),c=Object(d.a)(a,2),i=c[0],s=c[1];return Object(f.useEffect)((function(){n.match("instructions")||t.push("/light/".concat(n,"/").concat(i))}),[i,n,t]),"instructionsx"===n?Object(j.jsx)(de,{history:t}):Object(j.jsxs)("div",{className:"light category-container ".concat(n),children:[Object(j.jsxs)(p.d,{children:[be.map(function(e,t){return Object(j.jsx)(p.b,{path:"".concat(e.url,"/").concat(t),render:function(e){return Object(j.jsx)(te,Object(o.a)(Object(o.a)({},e),{},{name:"".concat(n).concat(t)}))}},t)}.bind(null,r)),Object(j.jsx)(p.b,{render:function(){return t.push("/light")}})]}),Object(j.jsxs)("div",{className:"selector-container",children:[Object(j.jsx)("button",{className:"previous selector  ".concat(1===i?"inactive":"active"),onClick:function(){return s(Math.max(i-1,1))},children:"Prev"}),be.map((function(e){return Object(j.jsx)("button",{onClick:function(){return s(e)},className:"instance selector ".concat(e===i?"selected":"")},"selector-".concat(e))})),Object(j.jsx)("button",{className:"next selector  ".concat(i===be.length?"inactive":"active"),onClick:function(){return s(Math.min(i+1,5))},children:"Next"})]})]})};function Oe(e){return{x:e.y,y:-e.x}}function we(e,t){var n=Object(d.a)(t,2),r=n[0],a=n[1],c=Oe({x:a.x-r.x,y:a.y-r.y}),i=[r,Ne(r,c)],s=[a,Ne(a,c)];return ke(e,i)+ke(e,s)<=ye(r,a)+1?ke(e,[r,a]):Math.min(ye(e,r),ye(e,a))}function ye(e,t){return ze(qe(e,t))}function ke(e,t){var n=Object(d.a)(t,2),r=n[0],a=qe(r,n[1]),c=qe(e,r);return Math.abs(a.x*c.y-a.y*c.x)/ze(a)}function qe(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Ne(e,t){return{x:e.x+t.x,y:e.y+t.y}}function Me(e,t){return{x:e.x*t,y:e.y*t}}function ze(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}function Se(e,t){return e.x*t.x+e.y*t.y}function Ce(e){var t=Object(f.useRef)(null),n=e.puzzleData,r=e.sticks,a=e.setSticks,c=e.updateWork,i=n.height,s=n.width,o=n.selectionProximity,l=n.startingConfiguration,u=n.stickLength,h=n.stickWidth,b=Object(f.useState)(null),v=Object(d.a)(b,2),g=v[0],m=v[1],p=Object(f.useState)(null),x=Object(d.a)(p,2),O=x[0],w=x[1],y=Object(f.useState)({x:0,y:0}),k=Object(d.a)(y,2),N=k[0],M=k[1],z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=e.target.getBoundingClientRect(),r={x:(t.clientX-n.left)/n.width*s,y:(t.clientY-n.top)/n.height*i};return M(r),r},S=Object(f.useCallback)((function(e){if(!O)return r.flatMap((function(e){return e})).reduce((function(t,n){var r=ye(n,e),a=t?ye(e,t):1/0;return r<Math.min(a,o)?n:t}),null)}),[r,o,O]),C=Object(f.useCallback)((function(e){return O||r.reduce((function(t,n){return we(e,n)<Math.min(t?we(e,t):1/0,o)?n:t}),null)}),[r,o,O]),I=function(e){var t=S(e);if(t){var n=r.find((function(e){return e.includes(t)}));return m(t),w(n),t}},P=function(e){var t=C(e);return w(t),t},T=function(e){if(g){var t=O.find((function(e){return e!==g})),n=qe(e,t),c=Me(n,u/ze(n));g.x=t.x+c.x,g.y=t.y+c.y,a(Object(q.a)(r))}},A=function(){w(null),m(null)},E=function(){c(),A()},B=Object(f.useCallback)((function(e){e.clearRect(0,0,s,i),e.beginPath(),e.lineWidth=h,e.lineCap="round",e.stroke();var t,n=Object(L.a)(r);try{for(n.s();!(t=n.n()).done;){var a=Object(d.a)(t.value,2),c=a[0],o=a[1];e.beginPath(),e.lineWidth=h,e.strokeStyle="#0b032d",e.moveTo(c.x,c.y),e.lineTo(o.x,o.y),e.stroke()}}catch(v){n.e(v)}finally{n.f()}var l=S(N)||g;if(l)e.beginPath(),e.arc(l.x,l.y,2*h,0,2*Math.PI),e.fillStyle="#7354f455",e.shadowBlur=h,e.shadowColor=e.fillStyle,e.fill(),e.shadowBlur=0,e.shadowColor="#0b032d";else{var u=C(N)||O;if(u){var j=Object(d.a)(u,2),f=j[0],b=j[1];e.beginPath(),e.strokeStyle="#7354f455",e.lineWidth=3*h,e.moveTo(f.x,f.y),e.lineTo(b.x,b.y),e.stroke()}}}),[r,i,s,l,N,S,C,g,O,h]);return Object(f.useEffect)((function(){var e=t.current.getContext("2d");B(e)}),[B]),Object(f.useEffect)((function(){var e=function(e){return O||g?e.preventDefault():null};return document.body.addEventListener("touchmove",e,{passive:!1}),function(){return document.body.removeEventListener("touchmove",e)}}),[O,g]),Object(j.jsx)("canvas",{id:"mandelbrot-canvas",ref:t,height:i,width:s,onTouchStart:function(e){var t=e.touches[0],n=z(e,t);I(n)||P(n)},onTouchEnd:E,onTouchMove:function(e){var t=e.touches[0],n=z(e,t);T(n),function(e){if(!g&&O){var t=Me(Ne.apply(void 0,Object(q.a)(O)),.5),n={x:e.x-t.x,y:e.y-t.y};for(var c in O){var i=O[c];O[c]=Ne(i,n)}a(Object(q.a)(r))}}(n)},onMouseDown:function(e){var t;t=z(e),I(t)||P(t)},onMouseUp:E,onMouseLeave:A,onMouseMove:function(e){var t=z(e);T(t),function(e){if(!g&&O){var t=e.target.getBoundingClientRect();for(var n in O){var c=O[n];O[n]={x:c.x+e.movementX*s/t.width,y:c.y+e.movementY*i/t.height}}a(Object(q.a)(r))}}(e)},className:C(N)||S(N)?"selecting":""})}function Ie(e){var t=e.name,n="matchstick-instance-data-".concat(t),r=JSON.parse(sessionStorage.getItem(n)),a=Object(f.useState)(r.work),c=Object(d.a)(a,2),i=c[0],s=c[1],l=Object(f.useState)("saved"),u=Object(d.a)(l,2),h=u[0],b=B("matchstick",t,u[1]),v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;return b(e)};return A("matchstick",t),Object(j.jsxs)("div",{className:"matchstick puzzle-container",children:[Object(j.jsx)("p",{className:"description",children:r.description}),Object(j.jsxs)("div",{className:"matchstick display-container",children:[Object(j.jsx)(Pe,{reset:function(){var e=r.startingConfiguration.map((function(e){return e.map((function(e){return Object(o.a)({},e)}))}));s(e),v(e)},isactive:!0}),Object(j.jsx)(Ce,{puzzleData:r,sticks:i,setSticks:s,updateWork:v}),Object(j.jsx)("div",{className:"saving-indicator",children:"saving"===h?"Saving...":"error"===h?"An error occurred while saving.":"saved"===h?"Saved.":" "})]})]})}function Pe(e){var t=e.reset,n=e.isactive;return Object(j.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"2048",height:"2048",viewBox:"0 0 2048 2048",onClick:t,className:"reset nav-button",isactive:n.toString(),children:Object(j.jsx)("path",{d:"M1767 1184q0 5-1 7-64 268-268 434.5t-478 166.5q-146  0-282.5-55t-243.5-157l-129 129q-19 19-45 19t-45-19-19-45v-448q0-26  19-45t45-19h448q26 0 45 19t19 45-19 45l-137 137q71 66 161 102t187  36q134 0 250-65t186-179q11-17 53-117 8-23 30-23h192q13 0 22.5  9.5t9.5 22.5zm25-800v448q0 26-19 45t-45 19h-448q-26 0-45-19t-19-45  19-45l138-138q-148-137-349-137-134 0-250 65t-186 179q-11 17-53  117-8 23-30 23h-199q-13 0-22.5-9.5t-9.5-22.5v-7q65-268  270-434.5t480-166.5q146 0 284 55.5t245 156.5l130-129q19-19 45-19t45  19 19 45z"})})}var Te={height:1024,width:1024,selectionProximity:25,stickLength:400,stickWidth:12,startingConfiguration:[[{x:100,y:312},{x:100,y:712}],[{x:130,y:312},{x:130,y:712}],[{x:160,y:312},{x:160,y:712}]]};function Le(e){var t=e.history;return Object(j.jsxs)("div",{className:"matchstick-instructions",children:[Object(j.jsxs)("h2",{children:["Matchstick Puzzle Instructions",Object(j.jsx)("hr",{})]}),Object(j.jsxs)("div",{className:"instructions",children:[Object(j.jsx)("p",{children:"Before you try the puzzles, see if you can make a triangle using the sticks below."}),Object(j.jsx)("p",{children:"You can move sticks by dragging them from their middle and rotate sticks by dragging them from either end."}),Object(j.jsx)("p",{children:"The button in the upper left resets the sticks to their original position."}),Object(j.jsx)(Ae,{data:Te}),Object(j.jsx)("p",{children:"These puzzle can be really tricky, good luck!"})]}),Object(j.jsx)("button",{className:"try-it",onClick:function(){return t.push("/matchstick")},children:"Try It!"})]})}function Ae(e){var t=e.data,n=Object(f.useState)(t.startingConfiguration),r=Object(d.a)(n,2),a=r[0],c=r[1],i=function(){var e=t.startingConfiguration.map((function(e){return e.map((function(e){return Object(o.a)({},e)}))}));c(e)};return Object(f.useEffect)(i,[]),Object(j.jsxs)("div",{className:"matchstick puzzle-container",children:[Object(j.jsx)("p",{className:"description",children:t.description}),Object(j.jsxs)("div",{className:"matchstick display-container",children:[Object(j.jsx)(Ee,{reset:i,isactive:!0}),Object(j.jsx)(Ce,{puzzleData:t,sticks:a,setSticks:c,updateWork:function(){}})]})]})}function Ee(e){var t=e.reset,n=e.isactive;return Object(j.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"2048",height:"2048",viewBox:"0 0 2048 2048",onClick:t,className:"reset nav-button",isactive:n.toString(),children:Object(j.jsx)("path",{d:"M1767 1184q0 5-1 7-64 268-268 434.5t-478 166.5q-146  0-282.5-55t-243.5-157l-129 129q-19 19-45 19t-45-19-19-45v-448q0-26  19-45t45-19h448q26 0 45 19t19 45-19 45l-137 137q71 66 161 102t187  36q134 0 250-65t186-179q11-17 53-117 8-23 30-23h192q13 0 22.5  9.5t9.5 22.5zm25-800v448q0 26-19 45t-45 19h-448q-26 0-45-19t-19-45  19-45l138-138q-148-137-349-137-134 0-250 65t-186 179q-11 17-53  117-8 23-30 23h-199q-13 0-22.5-9.5t-9.5-22.5v-7q65-268  270-434.5t480-166.5q146 0 284 55.5t245 156.5l130-129q19-19 45-19t45  19 19 45z"})})}var Be="Matchstick Puzzles",Je="matchstick";function Fe(){return Object(j.jsx)("div",{className:"list-preview",children:"Find all matchtick puzzles here"})}var Ue=[{instance:"instructions",title:"Instructions"},{instance:"fish",title:"Fish"},{instance:"squares1",title:"Squares 1"},{instance:"squares2",title:"Squares 2"},{instance:"squares3",title:"Squares 3"},{instance:"donkey",title:"Donkey"},{instance:"squares4",title:"Squares 4"},{instance:"squares5",title:"Squares 5"}];function De(e){var t=e.unitLength,n=e.startingCenter,r=e.work,a=Object(o.a)(Object(o.a)({},function(e){var t=e.startingCenter,n=e.unitLength;return{largeTriangle1:{center:{x:t.x,y:t.y+2*n*Math.sin(Math.PI/8)/Math.sin(5*Math.PI/8)},angle:-Math.PI/2},largeTriangle2:{center:{x:t.x-2*n*Math.sin(Math.PI/8)/Math.sin(5*Math.PI/8),y:t.y},angle:0},mediumTriangle:{center:{x:t.x+n*(Math.sqrt(2)-Math.sin(Math.PI/8)/Math.sin(5*Math.PI/8)),y:t.y-n*(Math.sqrt(2)-Math.sin(Math.PI/8)/Math.sin(5*Math.PI/8))},angle:-Math.PI/4},square:{center:{x:t.x,y:t.y-n*Math.sqrt(2)/2},angle:0},parallelogram:{center:{x:t.x+n*(3*Math.sqrt(2)/4),y:t.y+n*(Math.sqrt(2)/4)},angle:-Math.PI/4},smallTriangle1:{center:{x:t.x-n*Math.sqrt(2)/2,y:t.y-n*(Math.sqrt(2)/2+Math.sin(Math.PI/8)/Math.sin(5*Math.PI/8))},angle:Math.PI/2},smallTriangle2:{center:{x:t.x+n*(Math.sin(Math.PI/8)/Math.sin(5*Math.PI/8)),y:t.y},angle:Math.PI}}}({unitLength:t,startingCenter:n})),r);return[We(Object(o.a)(Object(o.a)({},a.largeTriangle1),{},{color:"#7d99ed",size:2*t,name:"largeTriangle1"})),We(Object(o.a)(Object(o.a)({},a.largeTriangle2),{},{color:"#70c2df",size:2*t,name:"largeTriangle2"})),We(Object(o.a)(Object(o.a)({},a.mediumTriangle),{},{color:"#9edfe5",size:t*Math.sqrt(2),name:"mediumTriangle"})),Xe(Object(o.a)(Object(o.a)({},a.square),{},{color:"#c3ebef",size:t})),He(Object(o.a)(Object(o.a)({},a.parallelogram),{},{color:"#3f2fa5",size:t})),We(Object(o.a)(Object(o.a)({},a.smallTriangle1),{},{color:"#6146d9",size:t,name:"smallTriangle1"})),We(Object(o.a)(Object(o.a)({},a.smallTriangle2),{},{color:"#7e6cfb",size:t,name:"smallTriangle2"}))]}function Re(e){var t=e.shape,n=e.relAngle,r=e.distanceFromCenter,a={relAngle:n};return Object.defineProperty(a,"x",{get:function(){return t.center.x+Math.cos(t.angle+n)*r}}),Object.defineProperty(a,"y",{get:function(){return t.center.y+Math.sin(t.angle+n)*r}}),a}function We(e){var t=e.size,n=e.center,r=e.angle,a=e.color,c=e.name,i=t*Math.sin(Math.PI/8)/Math.sin(5*Math.PI/8),s=t*Math.sin(Math.PI/4)/Math.sin(5*Math.PI/8),l={center:n,color:a,angle:r,name:c};return l.vertices=[{relAngle:0,distanceFromCenter:i},{relAngle:5*Math.PI/8,distanceFromCenter:s},{relAngle:-5*Math.PI/8,distanceFromCenter:s}].map((function(e){return Re(Object(o.a)(Object(o.a)({},e),{},{shape:l}))})),l}function Xe(e){var t=e.size,n=e.center,r=e.angle,a=e.color,c=t*Math.sqrt(2)/2,i={center:n,color:a,angle:r,name:"square"};return i.vertices=Array.from({length:4},(function(e,t){return Re({shape:i,distanceFromCenter:c,relAngle:t*Math.PI/2})})),i}function He(e){var t=e.size,n=e.center,r=e.angle,a=e.color,c=t/2,i=t/Math.sin(Math.atan2(2,1)),s={center:n,color:a,angle:r,name:"parallelogram"};return s.vertices=[{relAngle:0,distanceFromCenter:c},{relAngle:-Math.atan2(2,1),distanceFromCenter:i},{relAngle:Math.PI,distanceFromCenter:c},{relAngle:-(Math.PI+Math.atan2(2,1)),distanceFromCenter:i}].map((function(e){return Re(Object(o.a)(Object(o.a)({},e),{},{shape:s}))})),s}Ue.fetchCompletionStatus=J;var Ye=n(78);function Ge(e){var t=e.ctx,n=e.width,r=e.height,a=e.objective,c=e.shapes,i=e.vertexSelection,s=e.shapeSelection,l=e.objectiveCenter,u=e.unitLength;t.clearRect(0,0,n,r),a.forEach($e.bind(null,t,l,u)),c.forEach(Ze.bind(null,t)),i?(t.beginPath(),t.arc(i.x,i.y,6,0,2*Math.PI),t.fillStyle="#c1b4fa",t.shadowBlur=4,t.shadowColor=t.fillStyle,t.fill(),t.shadowBlur=0,t.shadowColor="#0b032d"):s&&Ze(t,Object(o.a)(Object(o.a)({},s),{},{color:"#c1b4fa"}))}function Ze(e,t){var n=Object(Ye.a)(t.vertices),r=n[0],a=n.slice(1),c=t.color;t.center;e.beginPath(),e.moveTo(r.x,r.y),a.forEach((function(t){return e.lineTo(t.x,t.y)})),e.closePath(),e.fillStyle=c,e.fill()}function $e(e,t,n,r){var a=r.map((function(e){var r=Object(d.a)(e,2),a=r[0],c=r[1];return[t.x+n*a,t.y+n*c]}));e.beginPath();var c=Object(Ye.a)(a),i=c[0],s=c.slice(1);e.moveTo.apply(e,Object(q.a)(i)),s.forEach((function(t){return e.lineTo.apply(e,Object(q.a)(t))})),e.closePath(),e.fillStyle="#0b032d",e.fill()}function Ke(e){var t=e.data,n=e.work,r=e.updateWork,a=e.saveStatus,c=Object(f.useRef)(null),i=Object(f.useMemo)((function(){return t}),[t]),s=i.height,o=i.width,l=i.selectionProximity,u=i.unitLength,h=i.objective,b=i.startingCenter,v=i.objectiveCenter,g=Object(f.useState)(null),m=Object(d.a)(g,2),p=m[0],x=m[1],O=Object(f.useState)(null),w=Object(d.a)(O,2),y=w[0],k=w[1],N=Object(f.useState)({x:0,y:0}),M=Object(d.a)(N,2),z=M[0],S=M[1],C=Object(f.useState)(De({unitLength:u,startingCenter:b,work:n})),I=Object(d.a)(C,2),P=I[0],T=I[1],L=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=e.target.getBoundingClientRect(),r={x:(t.clientX-n.left)/n.width*o,y:(t.clientY-n.top)/n.height*s};return S(r),r},A=Object(f.useCallback)((function(e){if(!y){var t=P.flatMap((function(e){return e.vertices}));return p||t.reduce((function(t,n){var r=ye(n,e),a=t?ye(e,t):1/0;return r<Math.min(a,l)?n:t}),null)}}),[P,p,y,l]),E=Object(f.useCallback)((function(e){return y||P.reduce((function(t,n){return function(e){var t=e.shape,n=t.vertices,r=t.center,a=e.point;return n.every((function(e,t,n){var c=n[(t+1)%n.length],i=[{x:e.x,y:e.y},{x:c.x,y:c.y}];return function(e,t,n){var r=Object(d.a)(n,2),a=r[0],c=r[1],i=qe(e,a),s=qe(t,a),o=Oe(qe(c,a));return Se(i,o)*Se(s,o)>=0}(a,r,i)}))}({shape:n,point:e})?n:t}),null)}),[P,y]),B=function(e){(function(e){var t=A(e);if(t){var n=P.find((function(e){return e.vertices.includes(t)}));return x(t),k(n),t}})(e)||function(e){var t=E(e);k(t)}(e)},J=function(e){if(p){var t=y.vertices,n=y.center,r=t.indexOf(p),a=t[(r+1)%t.length],c={x:a.x,y:a.y},i=qe(p,a),s=qe(t[0],n),o=Math.atan2(i.y,i.x)-Math.atan2(s.y,s.x),l=qe(e,a),u=Math.atan2(l.y,l.x);y.angle=u-o,y.center=Ne(c,qe(n,a)),T(Object(q.a)(P))}},F=function(){k(null),x(null)},U=function(){!function(){if(p){var e=y.vertices,t=y.center,n=e.indexOf(p),r=e[(n+1)%e.length],a={x:r.x,y:r.y},c=qe(p,r),i=qe(e[0],t),s=Math.atan2(c.y,c.x)-Math.atan2(i.y,i.x),o=Math.atan2(c.y,c.x),l=Array.from({length:25},(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[1];return Math.PI*r/12-Math.PI})).find((function(e){return Math.abs(o-e)<=Math.PI/23}));y.angle=l-s,y.center=Ne(a,qe(t,r)),T(Object(q.a)(P))}}(),r(P),F()};return Object(f.useEffect)((function(){Ge({ctx:c.current.getContext("2d"),shapeSelection:y||E(z),vertexSelection:p||A(z),height:s,width:o,shapes:P,objective:h,objectiveCenter:v,unitLength:u})}),[y,E,p,A,s,o,P,h,z,v,u]),Object(f.useEffect)((function(){var e=function(e){return y||p?e.preventDefault():null},t=document.querySelector("canvas");return t.addEventListener("touchmove",e,{passive:!1}),function(){return t.removeEventListener("touchmove",e)}}),[p,y]),Object(j.jsxs)("div",{className:"tangram display-container",children:[Object(j.jsx)(Qe,{reset:function(){var e=De({unitLength:u,startingCenter:b,work:{}});T(e),r(e)},isactive:!0}),Object(j.jsx)("canvas",{id:"tangram-canvas",ref:c,height:s,width:o,onMouseDown:function(e){B(L(e))},onMouseUp:U,onMouseLeave:F,onMouseMove:function(e){var t=L(e);J(t),function(e){if(!p&&y){var t=e.target.getBoundingClientRect(),n=y.center;y.center={x:n.x+e.movementX*o/t.width,y:n.y+e.movementY*s/t.height},T(Object(q.a)(P))}}(e)},onTouchStart:function(e){var t=e.touches[0],n=L(e,t);B(n)},onTouchEnd:U,onTouchMove:function(e){var t=e.touches[0],n=L(e,t);J(n),function(e){!p&&y&&(y.center=e,T(Object(q.a)(P)))}(n)},className:E(z)||A(z)?"selecting":""}),Object(j.jsx)("div",{className:"saving-indicator",children:"saving"===a?"Saving...":"error"===a?"An error occurred while saving.":"saved"===a?"Saved.":" "})]})}function Qe(e){var t=e.reset,n=e.isactive;return Object(j.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"2048",height:"2048",viewBox:"0 0 2048 2048",onClick:t,className:"reset nav-button",isactive:n.toString(),children:Object(j.jsx)("path",{d:"M1767 1184q0 5-1 7-64 268-268 434.5t-478 166.5q-146  0-282.5-55t-243.5-157l-129 129q-19 19-45 19t-45-19-19-45v-448q0-26  19-45t45-19h448q26 0 45 19t19 45-19 45l-137 137q71 66 161 102t187  36q134 0 250-65t186-179q11-17 53-117 8-23 30-23h192q13 0 22.5  9.5t9.5 22.5zm25-800v448q0 26-19 45t-45 19h-448q-26 0-45-19t-19-45  19-45l138-138q-148-137-349-137-134 0-250 65t-186 179q-11 17-53  117-8 23-30 23h-199q-13 0-22.5-9.5t-9.5-22.5v-7q65-268  270-434.5t480-166.5q146 0 284 55.5t245 156.5l130-129q19-19 45-19t45  19 19 45z"})})}function Ve(e){var t=e.name,n="tangram-instance-data-".concat(t),r=JSON.parse(sessionStorage.getItem(n)),a=Object(f.useState)(r.work),c=Object(d.a)(a,2),i=c[0],s=c[1],l=Object(f.useState)("saved"),u=Object(d.a)(l,2),h=u[0],b=B("tangram",t,u[1]);return A("tangram",t),Object(j.jsxs)("div",{className:"tangram puzzle-container",children:[Object(j.jsx)("p",{className:"description",children:r.description}),Object(j.jsx)(Ke,{data:r,work:i,updateWork:function(e){var t,n=Object(o.a)({},i),r=Object(L.a)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value,c=a.name,l=a.center,u=a.angle;n[c]={center:l,angle:u}}}catch(h){r.e(h)}finally{r.f()}s(n),b(n)},saveStatus:h})]})}Math.sqrt(2),Math.sqrt(2),Math.sqrt(2),Math.sqrt(2),Math.sqrt(2);var _e={objective:[[[-Math.sqrt(2),-Math.sqrt(2)],[Math.sqrt(2),-Math.sqrt(2)],[Math.sqrt(2),Math.sqrt(2)],[-Math.sqrt(2),Math.sqrt(2)]]],startingCenter:{x:768,y:384},unitLength:100,height:768,width:1024,selectionProximity:20,objectiveCenter:{x:300,y:384},work:{}};function et(e){var t=e.history;return Object(j.jsxs)("div",{className:"tangram tangram-instructions",children:[Object(j.jsxs)("h2",{children:["Tangram Instructions",Object(j.jsx)("hr",{})]}),Object(j.jsx)("p",{className:"instructions",children:"In tangram puzzles you will be given the same pieces each time and be tasked with making different shapes out of them! To move a piece, simply drag it. And to rotate a piece drag one of its corners."}),Object(j.jsx)(Ke,{data:_e,work:{},updateWork:function(){}}),Object(j.jsx)("button",{className:"try-it",onClick:function(){return t.push("/tangram")},children:"Try It!"})]})}var tt="Tangrams",nt="tangram";function rt(){return Object(j.jsx)("div",{className:"list-preview",children:"Find all tangram puzzles here"})}var at=[{instance:"instructions",title:"Instructions"},{instance:"triangle",title:"Triangle"},{instance:"rectangle",title:"Rectangle"},{instance:"trapezoid",title:"Trapezoid"},{instance:"twotriangles",title:"Two Triangles"},{instance:"twosquares",title:"Two Squares"},{instance:"cube",title:"Cube"},{instance:"hexagon",title:"Hexagon"},{instance:"incompleterectangle",title:"Incomplete Rectangle"}];at.fetchCompletionStatus=J;var ct=[a,r,c,i,s],it="/",st=function(){return Object(j.jsx)("div",{className:"potd-preview",children:"Check back later!"})};function ot(e){var t=e.history,n=Object(f.useContext)(y).user.token;return Object(j.jsxs)("div",{className:"dashboard-container",children:[Object(j.jsx)(lt,{history:t,token:n}),Object(j.jsxs)("div",{className:"puzzle-list-container",children:[Object(j.jsx)("h2",{children:"Individual Work"}),Object(j.jsx)("ul",{children:ct.map(ut.bind(null,t,n))})]})]})}function lt(e){var t=st;return Object(j.jsxs)("div",{className:"potd-container",onClick:function(){return e.history.push(it,{token:e.token})},children:[Object(j.jsx)("h2",{children:"Puzzle of the Day"}),Object(j.jsx)(t,{})]})}function ut(e,t,n){return Object(j.jsxs)("li",{onClick:function(){return e.push("/".concat(n.id),{token:t})},children:[Object(j.jsx)("h3",{children:n.name}),n.ListPreview()]},n.id)}function ht(e){var t=e.history,n=e.instanceList,r=e.title,a=e.puzzleType,c=Object(f.useContext)(y).user,i=Object(f.useState)(!1),s=Object(d.a)(i,2),o=s[0],l=s[1];Object(f.useEffect)((function(){o||Object(h.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.fetchCompletionStatus(c);case 2:l(!0);case 3:case"end":return e.stop()}}),e)})))()}),[o,n,c]);return Object(j.jsxs)("div",{className:"instance-list-container",children:[Object(j.jsx)("h2",{children:r}),Object(j.jsx)("ul",{style:{"grid-template-rows":"repeat(".concat(Math.ceil(n.length/2),", 1fr)")},children:n.map(function(e,t){var n,r=t.instance,c=t.title,i="".concat(a,"-instance-data-").concat(r),s=JSON.parse(sessionStorage.getItem(i)),o=!!s&&s.completed;return Object(j.jsx)("li",{onClick:function(){return e.push("/".concat(a,"/").concat(r))},className:o?"completed":"",children:Object(j.jsx)("h3",{children:(n=c,n.replace(/^./,(function(e){return e.toUpperCase()})))})},r)}.bind(null,t))})]})}function dt(e){var t=e.match,n=e.Instance,r=e.Instructions,a=e.id,c=e.name,i=e.instanceList;return Object(j.jsxs)(p.d,{children:[Object(j.jsx)(p.b,{path:"".concat(t.url,"/instructions"),render:function(e){return Object(j.jsx)(r,Object(o.a)({},e))}},"instructions"),i.map(function(e,t){var r=t.instance;return Object(j.jsx)(p.b,{path:"".concat(e.url,"/").concat(r),render:function(e){return Object(j.jsx)(n,Object(o.a)(Object(o.a)({},e),{},{name:r}))}},r)}.bind(null,t)),Object(j.jsx)(p.b,{exact:!0,path:t.url,render:function(e){return Object(j.jsx)(ht,Object(o.a)(Object(o.a)({},e),{},{instanceList:i,title:c,puzzleType:a}))}})]})}n(264);var jt=Object(x.a)(),ft=Object(j.jsx)("path",{d:"M1792 1024v128q0 53-32.5 90.5t-84.5 37.5h-704l293 294q38 36 38 90t-38 90l-75 76q-37 37-90 37-52 0-91-37l-651-652q-37-37-37-90 0-52 37-91l651-650q38-38 91-38 52 0 90 38l75 74q38 38 38 91t-38 91l-293 293h704q52 0 84.5 37.5t32.5 90.5z"});function bt(){var e=JSON.parse(sessionStorage.getItem("mcub-student-user")),t=Object(f.useState)(e),n=Object(d.a)(t,2),r=n[0],a=n[1],c={user:r,setUser:a};return Object(f.useEffect)((function(){r&&Object(h.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,J(r);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))()}),[r]),Object(j.jsx)(m.a,{history:jt,basename:"/",children:Object(j.jsx)(y.Provider,{value:c,children:r?Object(j.jsxs)("div",{children:[Object(j.jsxs)("nav",{className:"main-nav",children:[Object(j.jsx)(gt,{student:r.student,setUser:a}),Object(j.jsxs)(p.d,{children:[Object(j.jsx)(p.b,{exact:!0,path:"/"}),Object(j.jsx)(p.b,{component:vt})]})]}),Object(j.jsxs)(p.d,{children:[ct.map(mt),Object(j.jsx)(p.b,{path:"/login",component:k}),Object(j.jsx)(p.b,{path:"/",component:ot})]})]}):Object(j.jsxs)(p.d,{children:[Object(j.jsx)(p.b,{path:"/login",component:k}),Object(j.jsx)(p.b,{path:"/",children:Object(j.jsx)(p.a,{to:"/login"})})]})})})}function vt(e){var t=e.history,n=window.location.href.match(/#(.*)\/[^/]+$/)[1];return Object(j.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"2048",height:"2048",viewBox:"0 0 2048 2048",onClick:function(){return t.push(n)},className:"back-button",children:ft})}function gt(e){var t=e.student,n=e.setUser;return Object(j.jsxs)("div",{className:"profile-bar",children:[Object(j.jsxs)("span",{className:"student-name",children:[pt(t.first)," ",pt(t.last)]}),Object(j.jsx)("button",{onClick:function(){n(null),sessionStorage.removeItem("mcub-student-user")},className:"log-out",children:"Log Out"})]})}function mt(e){var t=e.Instance,n=e.id,r=e.Instructions,a=e.name,c=e.instanceList;return Object(j.jsx)(p.b,{path:"/".concat(e.id),render:function(e){return Object(j.jsx)(dt,Object(o.a)(Object(o.a)({},e),{},{Instance:t,id:n,Instructions:r,name:a,instanceList:c}))}},e.id)}function pt(e){return e.replace(/^.|\W./g,(function(e){return e.toUpperCase()}))}g.a.render(Object(j.jsx)(b.a.StrictMode,{children:Object(j.jsx)(bt,{})}),document.getElementById("root"))}},[[265,1,2]]]);
//# sourceMappingURL=main.2dd32d2c.chunk.js.map