(this["webpackJsonpstudent-app"]=this["webpackJsonpstudent-app"]||[]).push([[0],{147:function(e,t){},149:function(e,t){},163:function(e,t){},165:function(e,t){},193:function(e,t){},195:function(e,t){},196:function(e,t){},202:function(e,t){},204:function(e,t){},222:function(e,t){},224:function(e,t){},236:function(e,t){},239:function(e,t){},260:function(e,t,n){},261:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"name",(function(){return U})),n.d(r,"id",(function(){return M})),n.d(r,"ListPreview",(function(){return D})),n.d(r,"instanceSort",(function(){return F})),n.d(r,"Instructions",(function(){return C})),n.d(r,"Instance",(function(){return L}));var c={};n.r(c),n.d(c,"name",(function(){return B})),n.d(c,"id",(function(){return G})),n.d(c,"ListPreview",(function(){return R})),n.d(c,"instanceSort",(function(){return $})),n.d(c,"Instance",(function(){return H}));var a=n(133),o=n(18),s=n(6),i=n.n(s),u=n(11),l=n(5),d=n(0),f=n(1),j=n.n(f),b=n(134),h=n.n(b),p=n(71),v=n(7),O=n(137),m=n(135),w=n.n(m),x=j.a.createContext({user:null,setUser:function(){}});function g(e){var t=Object(f.useState)(),n=Object(l.a)(t,2),r=n[0],c=n[1],a=Object(f.useState)(),o=Object(l.a)(a,2),s=o[0],j=o[1],b=Object(f.useState)(!1),h=Object(l.a)(b,2),p=h[0],v=h[1],O=Object(f.useState)(!1),m=Object(l.a)(O,2),g=m[0],k=m[1],y=Object(f.useContext)(x).setUser,z=function(e,t){e((function(e){var n=t.target.value.replace(/[^a-zA-Z\-']/,"");return n.length<20?n:e}))},N=Object(f.useCallback)(function(){var t=Object(u.a)(i.a.mark((function t(n){var c,a,o,u,l,d,f;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r&&s){t.next=3;break}return k("missing name"),t.abrupt("return");case 3:return v(n?"create":"login"),c={first:r,last:s},a="".concat("https://secret-plains-66902.herokuapp.com/api","/students")+(n?"":"/login"),t.prev=6,t.next=9,fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});case 9:if(o=t.sent,v(!1),!o.ok){t.next=29;break}return k(!1),t.prev=13,t.next=16,o.json();case 16:u=t.sent.token,l=w.a.decode(u),d=l.student,f={token:u,student:d},sessionStorage.setItem("mcub-student-user",JSON.stringify(f)),y(f),e.history.push("/"),t.next=27;break;case 24:t.prev=24,t.t0=t.catch(13),console.log(t.t0);case 27:t.next=31;break;case 29:k(o.status),console.log("HTTP error, status = "+o.status);case 31:t.next=38;break;case 33:t.prev=33,t.t1=t.catch(6),v(!1),k(500),console.log(t.t1);case 38:case"end":return t.stop()}}),t,null,[[6,33],[13,24]])})));return function(e){return t.apply(this,arguments)}}(),[r,s,e.history,y]),S=Object(f.useCallback)((function(e){"Enter"===e.key&&N(!1)}),[N]);return Object(f.useEffect)((function(){return window.addEventListener("keydown",S),function(){return window.removeEventListener("keydown",S)}}),[S]),Object(d.jsx)("div",{className:"login-container",children:Object(d.jsxs)("div",{className:"login-window",children:[p?Object(d.jsx)("div",{className:"fetching-indicator",children:"create"===p?"Creating new user...":"Logging in..."}):null,g?Object(d.jsx)("p",{className:"login-error",children:404===g?"User not found. Please try again or create a new user.":403===g?"User already exists.":"missing name"===g?"Please enter both your first and last name.":"An error occurred, please try again."}):null,Object(d.jsxs)("div",{className:"name-container first",children:[Object(d.jsx)("label",{htmlFor:"firstname",children:"First Name:"}),Object(d.jsx)("input",{type:"text",name:"firstname",id:"firstname",value:r,onChange:z.bind(null,c)})]}),Object(d.jsxs)("div",{className:"name-container last",children:[Object(d.jsx)("label",{htmlFor:"lastname",children:"Last Name:"}),Object(d.jsx)("input",{type:"text",name:"lastname",id:"lastname",value:s,onChange:z.bind(null,j)})]}),Object(d.jsx)("button",{className:"create-student",onClick:function(){return N(!0)},children:"Create"}),Object(d.jsx)("button",{className:"login-student",onClick:function(){return N(!1)},children:"Log-In"})]})})}var k=n(37),y={"-":"-","+":"+","*":"x","/":"\xf7"},z={size:4,work:Array(16).fill(null).map((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[1],c=Math.floor(r/4),a=r%4,o=(a+c)%4+1;return{row:c,col:a,value:o}})),cages:[]},N={size:4,work:[{col:0,row:0,value:1},{col:1,row:0,value:2},{col:2,row:0,value:3},{col:3,row:0,value:4},{col:0,row:2,value:2},{col:0,row:3,value:4},{col:1,row:3,value:1},{col:3,row:3,value:3},{col:2,row:1,value:2},{col:2,row:2,value:4}],cages:[{squares:[{col:0,row:0},{col:1,row:0}],operation:"+",result:"3"},{squares:[{col:2,row:0},{col:3,row:0}],operation:"-",result:"1"},{squares:[{col:3,row:3}],operation:"",result:"3"},{squares:[{col:0,row:2},{col:0,row:3},{col:1,row:3}],operation:"*",result:"8"},{squares:[{col:2,row:1},{col:2,row:2}],operation:"/",result:"2"}]},S={size:4,work:Array(16).fill(null).map((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[1],c=[3,2,4,1,2,1,3,4,4,3,1,2,1,4,2,3],a=Math.floor(r/4),o=r%4,s=c[r];return{row:a,col:o,value:s}})),cages:[{squares:[{col:0,row:0},{col:0,row:1}],operation:"+",result:"5"},{squares:[{col:0,row:2},{col:0,row:3},{col:1,row:3}],operation:"+",result:"9"},{squares:[{col:1,row:0},{col:1,row:1},{col:2,row:0}],operation:"-",result:"1"},{squares:[{col:1,row:2},{col:2,row:2}],operation:"+",result:"4"},{squares:[{col:2,row:1},{col:3,row:0},{col:3,row:1}],operation:"-",result:"0"},{squares:[{col:2,row:3},{col:3,row:2},{col:3,row:3}],operation:"+",result:"7"}]};function C(e){var t=e.history;return Object(d.jsxs)("div",{className:"calcudoku-instructions",children:[Object(d.jsxs)("h2",{children:["Calcudoku Instructions",Object(d.jsx)("hr",{})]}),Object(d.jsx)("p",{children:"The goal of each puzzle is to fill the grid using only certain digits \u2013\u2013 1 through 4 for a 4\xd74 grid, 1 through 5 for a 5\xd75, etc. \u2013\u2013 so that no digit appears more than once in any row or any column."}),Object(d.jsx)(I,{data:z}),Object(d.jsx)("p",{children:"Additionally, the grid is divided into heavily outlined groups of squares called \u201ccages\u201d. Each cage has a target number and an operation in its upper left corner. The numbers when the numbers in the cage are combined using the cage\u2019s operation they must equal the target number."}),Object(d.jsx)(I,{data:N}),Object(d.jsx)("p",{children:'Digits may be repeated within a cage, as long as they are not in the same row or column. No operation is relevant for a single-cell cage: placing the "target" in the cell is the only possibility.'}),Object(d.jsx)(I,{data:S}),Object(d.jsxs)("p",{children:["Be careful that you know for sure that a number"," ",Object(d.jsx)("strong",{children:"has"})," to go in a square before you put it there. Making a mistake early can cause trouble later on. Use lots of process of elimination!"]}),Object(d.jsx)("button",{className:"try-it",onClick:function(){return t.push("/calcudoku/4x4beginner1")},children:"Try It!"})]})}function I(e){var t=e.data,n=t.size,r=Object(f.useState)(function(e){var t=e.size,n=e.cages,r=e.work;return Array(Math.pow(t,2)).fill(null).map((function(){for(var e=arguments.length,c=new Array(e),a=0;a<e;a++)c[a]=arguments[a];var o=c[1],s=Math.floor(o/t),i=o%t,u=E({col:s,row:i}),l=r.find(u),d=l?l.value:null,f=n.find((function(e){return e.squares.find(u)})),j=T({col:s,row:i},f);if(!f)return{col:s,row:i,value:d,neighbors:j};var b=f.squares.every((function(e){return e.col>=s&&(e.row>=i||e.col>s)})),h=b?f.result:null,p=b?y[f.operation]:null;return{col:s,row:i,value:d,neighbors:j,result:h,operation:p}}))}(t)),c=Object(l.a)(r,2),a=c[0],o=(c[1],Object(f.useState)(null)),s=Object(l.a)(o,2),i=s[0],u=s[1];return Object(d.jsx)("div",{children:a?Object(d.jsx)("div",{className:"puzzle-container instructions",size:n,children:Object(d.jsx)("div",{className:"grid-container",size:n,children:a.map((function(e){var t="calcudoku-square "+e.neighbors.join(" ")+(e===i?" active":"");return Object(d.jsxs)("div",{className:t,onClick:function(){return u(e)},children:[Object(d.jsxs)("div",{className:"cage-indicator",children:[e.result,e.operation]}),Object(d.jsx)("input",{type:"number",value:e.value||"",disabled:!0})]})}))})}):null})}function T(e,t){var n=[],r={"n-up":{col:e.col-1,row:e.row},"n-down":{col:e.col+1,row:e.row},"n-left":{col:e.col,row:e.row-1},"n-right":{col:e.col,row:e.row+1}};if(!t)return Object.keys(r);for(var c in r){var a=E(r[c]);t.squares.find(a)&&n.push(c)}return n}function E(e){var t=e.col,n=e.row;return function(e){return e.col===t&&e.row===n}}var q={"-":"-","+":"+","*":"x","/":"\xf7"};function L(e){var t=Object(f.useMemo)((function(){return e.name}),[e.name]),n=Object(f.useMemo)((function(){return"calcudoku-instance-data-".concat(t)}),[t]),r=Object(f.useMemo)((function(){return JSON.parse(sessionStorage.getItem(n))}),[n]),c=Object(f.useState)(r?r.size:null),a=Object(l.a)(c,2),o=a[0],s=a[1],j=Object(f.useState)(r?A(r):null),b=Object(l.a)(j,2),h=b[0],p=b[1],v=Object(f.useState)(r?r.cages:null),O=Object(l.a)(v,2),m=O[0],w=O[1],g=Object(f.useState)(null),y=Object(l.a)(g,2),z=y[0],N=y[1],S=Object(f.useState)(r?"saved":null),C=Object(l.a)(S,2),I=C[0],T=C[1],E=Object(f.useContext)(x).user.token,q="".concat("https://secret-plains-66902.herokuapp.com/api","/puzzles/calcudoku/").concat(t);Object(f.useEffect)((function(){r||Object(u.a)(i.a.mark((function e(){var t,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(q,{method:"GET",headers:{authorization:E}});case 2:if(!(t=e.sent).ok){e.next=21;break}return e.prev=4,e.next=7,t.json();case 7:r=e.sent,sessionStorage.setItem(n,JSON.stringify(r)),s(r.size),p(A(r)),w(r.cages),T("saved"),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(4),p([]),console.log(e.t0);case 19:e.next=22;break;case 21:console.log("HTTP error, status = "+t.status);case 22:case"end":return e.stop()}}),e,null,[[4,15]])})))()}),[q,E,r,n]),Object(f.useEffect)((function(){var e="".concat("https://secret-plains-66902.herokuapp.com/api","/activepuzzle");return Object(u.a)(i.a.mark((function n(){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e,{method:"PUT",headers:{"Content-Type":"application/json",authorization:E},body:JSON.stringify({puzzleName:"calcudoku",puzzleId:t})});case 2:n.sent;case 3:case"end":return n.stop()}}),n)})))(),function(){fetch(e,{method:"DELETE",headers:{authorization:E}})}}),[E,t]);var L=function(){var e=Object(u.a)(i.a.mark((function e(){var t,r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return T("saving"),t=h.map((function(e){return{col:e.col,row:e.row,value:e.value}})),e.next=4,fetch(q,{method:"PUT",headers:{"Content-Type":"application/json",authorization:E},body:JSON.stringify({puzzleData:t})});case 4:r=e.sent,(c=JSON.parse(sessionStorage.getItem(n))).work=t,sessionStorage.setItem(n,JSON.stringify(c)),r.ok?T("saved"):T("error");case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),J=function(e){var t=e.key;if(z){if(!isNaN(t)&&1<=t&&t<=o)z.value=t;else{var n=z.col,r=z.row;switch(t){case"Backspace":case"Delete":z.value="";break;case"ArrowUp":return void N(h.find(P({col:n-1,row:r}))||z);case"ArrowDown":return void N(h.find(P({col:n+1,row:r}))||z);case"ArrowLeft":return void N(h.find(P({col:n,row:r-1}))||z);case"ArrowRight":return void N(h.find(P({col:n,row:r+1}))||z);default:return}}p(Object(k.a)(h)),L()}else["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(t)&&N(h.find(P({col:0,row:0})))};Object(f.useEffect)((function(){return window.addEventListener("keydown",J),function(){return window.removeEventListener("keydown",J)}}));var U=function(e){return Object(d.jsx)("button",{className:"number-select",onClick:function(){z.value=e,p(Object(k.a)(h)),L()},children:e},"num".concat(e))};return Object(d.jsx)("div",{children:h?Object(d.jsxs)("div",{className:"puzzle-container",size:o,children:[Object(d.jsx)("div",{className:"saving-indicator",children:"saving"===I?"Saving...":"error"===I?"An error occurred while saving.":"saved"===I?"Saved.":" "}),Object(d.jsx)("div",{className:"grid-container",size:o,children:h.map((function(e){var n=P(e),r=e.result&&m?m.find((function(e){return e.squares.find(n)})):null,c="calcudoku-square "+e.neighbors.join(" ")+(e===z?" active":"")+(t.match("4x4beginner1")&&function(e,t){var n=t.col,r=t.row,c=t.value;return e.some((function(e){return(e.row===r||e.col===n)&&!(e.row===r&&e.col===n)&&e.value===c}))}(h,e)?" duplicate":"")+((t.match("4x4beginner1")||t.match("4x4beginner2"))&&r&&function(e,t){var n,r,c=t.squares,a=t.operation,o=t.result,s=c.map((function(t){return+e.find(P(t)).value}));if(s.some((function(e){return!e})))return!1;switch(a){case"+":r=0,n=function(e){return function(e,t){return e+t}};break;case"-":r=0,n=function(e){return function(t,n,r){return r===e?t+n:t-n}};break;case"*":r=1,n=function(e){return function(e,t){return e*t}};break;case"/":r=1,n=function(e){return function(t,n,r){return r===e?t*n:t/n}};break;default:r=0,n=function(e){return function(e,t){return t}}}return!s.map((function(e,t,c){return c.reduce(n(t),r)})).includes(+o)}(h,r)?" cageError":"");return Object(d.jsxs)("div",{className:c,onClick:function(){return N(e)},children:[Object(d.jsxs)("div",{className:"cage-indicator",children:[e.result,e.operation]}),Object(d.jsx)("input",{type:"number",value:e.value||"",disabled:!0}),Object(d.jsx)("div",{className:"selector"})]})}))}),Object(d.jsx)("div",{className:"number-select-container",children:new Array(o).fill(null).map((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[1];return U(r+1)}))})]}):Object(d.jsx)("h2",{className:"loading-indicator",children:"Loading..."})})}function A(e){var t=e.size,n=e.cages,r=e.work;return Array(Math.pow(t,2)).fill(null).map((function(){for(var e=arguments.length,c=new Array(e),a=0;a<e;a++)c[a]=arguments[a];var o=c[1],s=Math.floor(o/t),i=o%t,u=P({col:s,row:i}),l=r.find(u),d=n.find((function(e){return e.squares.find(u)})),f=J({col:s,row:i},d),j=d.squares.every((function(e){return e.col>=s&&(e.row>=i||e.col>s)})),b=j?d.result:null,h=j?q[d.operation]:null,p=l?l.value:null;return{col:s,row:i,value:p,neighbors:f,result:b,operation:h}}))}function J(e,t){var n=[],r={"n-up":{col:e.col-1,row:e.row},"n-down":{col:e.col+1,row:e.row},"n-left":{col:e.col,row:e.row-1},"n-right":{col:e.col,row:e.row+1}};for(var c in r){var a=P(r[c]);t.squares.find(a)&&n.push(c)}return n}function P(e){var t=e.col,n=e.row;return function(e){return e.col===t&&e.row===n}}var U="Calcudokus",M="calcudoku";function D(){return Object(d.jsx)("div",{className:"list-preview",children:"Find all calcudokus here"})}function F(e,t){var n=e.instance,r=t.instance,c=n.match(/^(\d)x\d([a-z]+)(\d+)$/),a=Object(l.a)(c,4),o=a[1],s=a[2],i=a[3],u=r.match(/^(\d)x\d([a-z]+)(\d+)$/),d=Object(l.a)(u,4),f=d[1],j=d[2],b=d[3];return o<f?-1:o>f?1:"beginner"===s&&["intermediate","expert"].includes(j)||"intermediate"===s&&"expert"===j||s===j&&i<b?-1:1}function H(e){var t=Object(f.useMemo)((function(){return e.name}),[e.name]),n=Object(f.useMemo)((function(){return"logic-instance-data-".concat(t)}),[t]),r=Object(f.useState)(""),c=Object(l.a)(r,2),a=c[0],o=c[1],s=Object(f.useState)(""),j=Object(l.a)(s,2),b=j[0],h=j[1],p=Object(f.useState)(null),v=Object(l.a)(p,2),O=v[0],m=v[1],w=Object(f.useState)(30),g=Object(l.a)(w,2),k=g[0],y=g[1],z=Object(f.useRef)(!0),N=Object(f.useContext)(x).user.token,S="".concat("https://secret-plains-66902.herokuapp.com/api","/puzzles/logic/").concat(t);Object(f.useMemo)((function(){var e=JSON.parse(sessionStorage.getItem(n));if(e)return o(e.description),h(e.work),void m("saved");Object(u.a)(i.a.mark((function e(){var t,r,c,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(S,{method:"GET",headers:{authorization:N}});case 2:if(!(t=e.sent).ok){e.next=21;break}return e.prev=4,e.next=7,t.json();case 7:r=e.sent,c=r.description,a=r.work,sessionStorage.setItem(n,JSON.stringify({description:c,work:a})),o(c),h(a),m("saved"),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),console.log(e.t0);case 19:e.next=22;break;case 21:console.log("HTTP error, status = "+t.status);case 22:case"end":return e.stop()}}),e,null,[[4,16]])})))()}),[S,N,h,n]),Object(f.useEffect)((function(){var e="".concat("https://secret-plains-66902.herokuapp.com/api","/activepuzzle");return Object(u.a)(i.a.mark((function n(){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e,{method:"PUT",headers:{"Content-Type":"application/json",authorization:N},body:JSON.stringify({puzzleName:"logic",puzzleId:t})});case 2:n.sent;case 3:case"end":return n.stop()}}),n)})))(),function(){fetch(e,{method:"DELETE",headers:{authorization:N}})}}),[N,t]);var C=Object(f.useCallback)(Object(u.a)(i.a.mark((function e(){var t,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m("saving"),e.next=3,fetch(S,{method:"PUT",headers:{"Content-Type":"application/json",authorization:N},body:JSON.stringify({puzzleData:b})});case 3:t=e.sent,(r=JSON.parse(sessionStorage.getItem(n))).work=b,sessionStorage.setItem(n,JSON.stringify(r)),t.ok?m("saved"):m("error");case 8:case"end":return e.stop()}}),e)}))),[N,b,S,n]);return Object(f.useEffect)((function(){if(z.current)return z.current=!1;m(null);var t=e.history.listen(C),n=setTimeout(C,3e3);return function(){clearTimeout(n),t()}}),[C,e.history,m,z]),Object(f.useEffect)((function(){var e=function(){"saved"!==O&&C()};return window.addEventListener("beforeunload",e),function(){window.removeEventListener("beforeunload",e)}}),[C,O]),Object(f.useEffect)((function(){0===k&&(y(30),O||C())}),[k,C,O]),Object(f.useEffect)((function(){var e=setInterval((function(){return y((function(e){return e-1}))}),1e3);return function(){return clearInterval(e)}}),[y]),a?Object(d.jsxs)("div",{className:"logic instance",children:[Object(d.jsx)("p",{className:"puzzle-description",children:a}),Object(d.jsx)("textarea",{className:"work",onChange:function(e){h(e.target.value)},value:b,placeholder:"Enter your solution or any notes here!"}),Object(d.jsx)("div",{className:"saving-indicator",children:"saving"===O?"Saving...":"error"===O?"An error occurred while saving.":"saved"===O?"Saved.":" "})]}):Object(d.jsx)("h2",{className:"loading-indicator",children:"Loading..."})}var B="Logic Puzzles",G="logic";function R(){return Object(d.jsx)("div",{className:"list-preview",children:"Find all logic puzzles here"})}var $=function(){return 1},W=[r,c],Z="/calcudoku/instructions",K=function(){return Object(d.jsx)("div",{className:"potd-preview",children:"Like Sudokus, but with a twist!"})};function Q(e){var t=e.history,n=Object(f.useContext)(x).user.token;return Object(d.jsxs)("div",{className:"dashboard-container",children:[Object(d.jsx)(V,{history:t,token:n}),Object(d.jsxs)("div",{className:"puzzle-list-container",children:[Object(d.jsx)("h2",{children:"Individual Work"}),Object(d.jsx)("ul",{children:W.map(X.bind(null,t,n))})]})]})}function V(e){var t=K;return Object(d.jsxs)("div",{className:"potd-container",onClick:function(){return e.history.push(Z,{token:e.token})},children:[Object(d.jsx)("h2",{children:"Puzzle of the Day"}),Object(d.jsx)(t,{})]})}function X(e,t,n){return Object(d.jsxs)("li",{onClick:function(){return e.push("/".concat(n.id),{token:t})},children:[Object(d.jsx)("h3",{children:n.name}),n.ListPreview()]},n.id)}function Y(e){var t=e.history,n=e.instanceList,r=e.title,c=e.puzzleType;return Object(d.jsx)("div",{className:"calcudoku-page-container",children:Object(d.jsx)("div",{className:"instance-list-container",children:0===n.length?Object(d.jsx)("h2",{className:"fetching-indicator",children:"Loading..."}):Object(d.jsxs)("div",{children:[Object(d.jsx)("h2",{children:r}),Object(d.jsx)("ul",{children:n.map(function(e,t){var n,r=t.instance,a=t.title;return Object(d.jsx)("li",{onClick:function(){return e.push("/".concat(c,"/").concat(r))},children:Object(d.jsx)("h3",{children:(n=a,n.replace(/^./,(function(e){return e.toUpperCase()})))})},r)}.bind(null,t))})]})})})}function _(e){var t=e.match,n=e.Instance,r=e.Instructions,c=e.id,a=e.instanceSort,s=e.name,j=sessionStorage.getItem("".concat(c,"-instance-list")),b=Object(f.useContext)(x).user.token,h=Object(f.useCallback)((function(e){return e.sort(a),r&&e.unshift({instance:"instructions",title:"instructions"}),e}),[r,a]),p=Object(f.useState)(j?h(JSON.parse(j)):[]),O=Object(l.a)(p,2),m=O[0],w=O[1];Object(f.useEffect)((function(){j||Object(u.a)(i.a.mark((function e(){var t,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat("https://secret-plains-66902.herokuapp.com/api","/puzzles/").concat(c,"/"),e.next=3,fetch(t,{method:"GET",headers:{authorization:b}});case 3:if(!(n=e.sent).ok){e.next=18;break}return e.prev=5,e.next=8,n.json();case 8:r=e.sent,sessionStorage.setItem("".concat(c,"-instance-list"),JSON.stringify(r)),w(h(r)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),console.log(e.t0);case 16:e.next=19;break;case 18:console.log("HTTP error, status = "+n.status);case 19:case"end":return e.stop()}}),e,null,[[5,13]])})))()}),[b,j,c,h]);return Object(d.jsxs)(v.d,{children:[Object(d.jsx)(v.b,{path:"".concat(t.url,"/instructions"),render:function(e){return Object(d.jsx)(r,Object(o.a)({},e))}},"instructions"),m?m.map(function(e,t){var r=t.instance;return Object(d.jsx)(v.b,{path:"".concat(e.url,"/").concat(r),render:function(e){return Object(d.jsx)(n,Object(o.a)(Object(o.a)({},e),{},{name:r}))}},r)}.bind(null,t)):null,Object(d.jsx)(v.b,{exact:!0,path:t.url,render:function(e){return Object(d.jsx)(Y,Object(o.a)(Object(o.a)({},e),{},{instanceList:m,title:s,puzzleType:c}))}})]})}n(260);var ee=Object(O.a)(),te=Object(d.jsx)("path",{d:"M1792 1024v128q0 53-32.5 90.5t-84.5 37.5h-704l293 294q38 36 38 90t-38 90l-75 76q-37 37-90 37-52 0-91-37l-651-652q-37-37-37-90 0-52 37-91l651-650q38-38 91-38 52 0 90 38l75 74q38 38 38 91t-38 91l-293 293h704q52 0 84.5 37.5t32.5 90.5z"});function ne(){var e=JSON.parse(sessionStorage.getItem("mcub-student-user")),t=Object(f.useState)(e),n=Object(l.a)(t,2),r=n[0],c=n[1],a={user:r,setUser:c};return Object(f.useEffect)((function(){r&&Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,oe(r);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))()}),[r]),Object(d.jsx)(p.a,{history:ee,basename:"/",children:Object(d.jsx)(x.Provider,{value:a,children:r?Object(d.jsxs)("div",{children:[Object(d.jsxs)("nav",{className:"main-nav",children:[Object(d.jsx)(ce,{student:r.student,setUser:c}),Object(d.jsxs)(v.d,{children:[Object(d.jsx)(v.b,{exact:!0,path:"/"}),Object(d.jsx)(v.b,{component:re})]})]}),Object(d.jsxs)(v.d,{children:[W.map(ae),Object(d.jsx)(v.b,{path:"/login",component:g}),Object(d.jsx)(v.b,{path:"/",component:Q})]})]}):Object(d.jsxs)(v.d,{children:[Object(d.jsx)(v.b,{path:"/login",component:g}),Object(d.jsx)(v.b,{path:"/",children:Object(d.jsx)(v.a,{to:"/login"})})]})})})}function re(e){var t=e.history,n=window.location.href.match(/#(.*)\/[^/]+$/)[1];return Object(d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"2048",height:"2048",viewBox:"0 0 2048 2048",onClick:function(){return t.push(n)},className:"back-button",children:te})}function ce(e){var t=e.student,n=e.setUser;return Object(d.jsxs)("div",{className:"profile-bar",children:[Object(d.jsxs)("span",{className:"student-name",children:[ie(t.first)," ",ie(t.last)]}),Object(d.jsx)("button",{onClick:function(){n(null),sessionStorage.removeItem("mcub-student-user")},className:"log-out",children:"Log Out"})]})}function ae(e){var t=e.Instance,n=e.id,r=e.Instructions,c=e.instanceSort,a=e.name;return Object(d.jsx)(v.b,{path:"/".concat(e.id),render:function(e){return Object(d.jsx)(_,Object(o.a)(Object(o.a)({},e),{},{Instance:t,id:n,Instructions:r,instanceSort:c,name:a}))}},e.id)}function oe(e){return se.apply(this,arguments)}function se(){return(se=Object(u.a)(i.a.mark((function e(t){var n,r,c,o,s,u,l,d,f,j,b,h,p;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.token,r="".concat("https://secret-plains-66902.herokuapp.com/api","/data"),e.next=4,fetch(r,{method:"GET",headers:{authorization:n}});case 4:if(!(c=e.sent).ok){e.next=12;break}return e.next=8,c.json();case 8:for(s in o=e.sent){u="".concat(s,"-instance-list"),l=[],d=Object(a.a)(o[s]);try{for(d.s();!(f=d.n()).done;)j=f.value,b=j.puzzleId,h=j.title,p="".concat(s,"-instance-data-").concat(b),sessionStorage.setItem(p,JSON.stringify(j)),l.push({instance:b,title:h})}catch(i){d.e(i)}finally{d.f()}sessionStorage.setItem(u,JSON.stringify(l))}e.next=13;break;case 12:console.log("HTTP error, status = ".concat(c.status));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ie(e){return e.replace(/^.|\W./g,(function(e){return e.toUpperCase()}))}h.a.render(Object(d.jsx)(j.a.StrictMode,{children:Object(d.jsx)(ne,{})}),document.getElementById("root"))}},[[261,1,2]]]);
//# sourceMappingURL=main.cf51757d.chunk.js.map